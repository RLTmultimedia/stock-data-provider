(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),__awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(a,s){function i(e){try{u(n.next(e))}catch(t){s(t)}}function o(e){try{u(n["throw"](e))}catch(t){s(t)}}function u(e){e.done?a(e.value):new r(function(t){t(e.value)}).then(i,o)}u((n=n.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});var scripsMeta=new Map,GOOGLE_META_SIZE=6,subscriptionId=0,GoogleFinanceDataProvider=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"sessionCreated",value:function(){return Promise.resolve(!0)}},{key:"getChartData",value:function(t){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a,s,i,o,u,c,p,l,h,f,v,m;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n={},a=0,s=0,i=t.requiredBars,o=500,r.next=7,fetch("https://data.traderslab.in/getprices?q="+t.scrip+"&i="+t.interval+"&p="+o+"d&f=d,o,h,l,c,v&ts="+t.startTime);case 7:return u=r.sent,r.next=10,u.text();case 10:for(c=r.sent,p=c.split("\n"),l={scrip:t.scrip,interval:t.interval,open:new Array,high:new Array,low:new Array,close:new Array,volume:new Array,timestamp:new Array},h=0;h<p.length-1;h++)h<=GOOGLE_META_SIZE?e.parseMeta(n,p[h]):(f=void 0,v=p[h].split(","),v[0].length>10&&v[0].startsWith("a")?(f=a=parseInt(v[0].substr(1)),s=parseInt(v[5])):(f=a+parseInt(v[0])*n.Interval,s+=parseInt(v[5])),l.timestamp.push(1e3*f),l.open.push(parseFloat(v[4])),l.high.push(parseFloat(v[2])),l.low.push(parseFloat(v[3])),l.close.push(parseFloat(v[1])),l.volume.push(parseFloat(v[5])));return m={timezoneOffset:n.TimeZoneOffset,open:n.OpenMinute,close:n.CloseMinute,exchange:n.Exchange},scripsMeta.set(t.scrip,m),r.abrupt("return",l);case 17:case"end":return r.stop()}},r,this)}))}},{key:"getAvailableScrips",value:function(e){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function t(){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=new Array,t.next=3,fetch("https://data.traderslab.in/match?matchtype=matchall&q="+e);case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,!(a.matches&&a.matches.length>0)){t.next=10;break}return a.matches.forEach(function(e){r.push({scrip:e.t,exchange:e.e,name:e.n})}),t.abrupt("return",r);case 10:return t.abrupt("return",null);case 11:case"end":return t.stop()}},t,this)}))}},{key:"subscribeForScrips",value:function(e,t){return subscriptionId.toString()}},{key:"unSubscribeForScrips",value:function(e,t){return!0}},{key:"getScripMetaData",value:function(e){return scripsMeta.get(e)}},{key:"getQuote",value:function(e,t){return __awaiter(this,void 0,void 0,regeneratorRuntime.mark(function r(){var n,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,fetch("https://data.traderslab.in/info?q="+t+":"+e);case 2:return n=r.sent,r.next=5,n.text();case 5:return a=r.sent,s=JSON.parse(a.trim().substr(2)),r.abrupt("return",{scrip:s[0].t,volume:0,ltt:0,ltp:parseFloat(s[0].l_fix),prevClose:parseFloat(s[0].pcls_fix)});case 8:case"end":return r.stop()}},r,this)}))}}],[{key:"parseMeta",value:function(e,t){t.startsWith("EXCHANGE")?e.Exchange=t.split("%3D")[1]:t.startsWith("MARKET_OPEN_MINUTE")?e.OpenMinute=parseInt(t.split("=")[1]):t.startsWith("MARKET_CLOSE_MINUTE")?e.CloseMinute=parseInt(t.split("=")[1]):t.startsWith("INTERVAL")?e.Interval=parseInt(t.split("=")[1]):t.startsWith("COLUMNS")||t.startsWith("TIMEZONE_OFFSET")&&(e.TimeZoneOffset=parseInt(t.split("=")[1]))}}]),e}();exports.GoogleFinanceDataProvider=GoogleFinanceDataProvider,global.DataProvider=new GoogleFinanceDataProvider;
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}]},{},[1])

